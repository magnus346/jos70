<!DOCTYPE html>
<html>
<head>
  <title>Socket Broadcaster</title>
  <script src="/socket.io/socket.io.js"></script>
  <style>body { width:100%; height:100vh; }</style>
</head>
<body>
  <audio id="right" src="audio-right.mp3"></audio>
  <script>
    const socket = io();

    const toBlack = () => {
      document.body.style.background = "black";
    };

    const playRight = () => {
      if(!taped) return false;
      document.body.style.background = "green";
      document.getElementById("right").play();
      setTimeout(() => { toBlack(); }, 2000);
    };

    let taped = false;
    document.addEventListener('click', () => { taped = true; toBlack(); });
    
    socket.on('message', msg => {
      playRight();
    });
  </script>
</body>
</html>
